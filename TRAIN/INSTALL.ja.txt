        TRAIN for WindowsCE Ver.0.43(Beta版)　インストールマニュアル

         Copyright(C) 2024 Eiichiroh Itoh All rights reserved.

        * １．準備
        * ２．インストール
        * ３．起動
        * ４．より快適に使う為に
        * ５．困った時には

１．準備

     TRAINを実行するには、このパッケージ内の実行ファイルの他に

        * フォントを格納したDLL(KCTRL.DLL)
        * 中間ファイルと呼ぶ路線のデータファイル(拡張子.DAT)

     が必要です。
     フォントを格納したDLLは、このパッケージを入手したのと同じ場所に置
     いてあるはずです。
     中間ファイルは以下の所に登録されています。実行前に予めダウンロー
     ドして下さい。

     　登録場所:http://www.oohito.com/

          この他，Niftyserve FHPPCフォーラムの10番ライブラリにも
          登録しています。

２．インストール

     まず必要なフォルダを作成します。TRAIN関連のデータは種類が多いので
     、データ用のフォルダを作成しておいた方がよいでしょう。ここでは、
     /Trainにデータを格納しましょう。「Explorer」を使って、Handheld-PC
     のフォルダにて「Train」というフォルダを作成して下さい。プログラム
     は、 /Program Filesに格納することにします。上の２つのディレクトリ
     はお好きなものを選んだり，作成して結構です。ただし，KCTRL.DLLとい
     うファイルだけは必ず，

        * 「/」(ルート)フォルダ
        * 「/Windows」フォルダ
        * 「/Storage Card」(日本語版の場合)，あるいは「/PC Card」フォ
          ルダ(英語版の場合)

     のいずれかに格納してください。

     なお、KCTRL.DLLは英語版、日本語版、OSバージョンによってインストー
     ル方法が異なります。詳しいことはKCTRL.DLLのドキュメントを参照して
     ください。

     (I-1)　/Trainには中間データを格納します。
          拡張子が .DATのファイルが中間ファイルです。このファイルをデ
          ータパッケージから解凍し、/Trainに格納して下さい。

          　例:
          　　/Train
          　　　| TOKYO.DAT
          　　　| KANTOU.DAT

     (I-2)　/Program Filesには、実行ファイルを格納します。
          TRAINの実行ファイルは TRAIN.EXEです。これを実行パッケージか
          ら解凍し /Program Filesに格納して下さい。

          　例:
          　　/Program Files
          　　　| TRAIN.EXE

     (I-3)　「/」「/Windows」「/Storage Card(あるいは/PC Card)」のいず
     れかに、DLLファイルを格納します。
          TRAINを実行するには、漢字表示用のDLLが必要です。 KCTRL.DLLを
          フォントパッケージから解凍し、上記のフォルダのいずれかに格納
          してください。

          　例:
          　　/Windows
          　　　| KCTRL.DLL

     (I-4)　実行ファイルを登録します。
          最後に、実行ファイル TRAIN.EXEのショートカットをデスクトップ
          などに作成します。そうすればすばやく起動できるようになります
          。

     以上でインストール作業は終りです。

３．起動

     インストールが終了したら、TRAINを起動して下さい。初めて起動した場
     合には、データファイル選択のダイアログボックスが現れます。
     スタイラスやキーボードを使って、中間ファイルを格納したフォルダま
     で移動し、適当な中間ファイルを選び、{OK}を押して下さい。すると画
     面中央に、砂時計マークが表示され、しばらく（１〜５秒）待った後に
     、出発駅のフィールドでカーソルが点滅します。(→うまくいかない場合
     は、「５．困った時は」を参照して下さい)（なお、２度目の起動以降は
     ファイル選択のダイアログは現れません。）
     出発駅、到着駅ともにローマ字にて駅名を入力し {ENTER}キーを押すと
     、探索が開始し、画面右側に最短で結ぶ経路が表示されます。駅名を入
     力すると、駅名の候補が画面右側にリスト形式で表示されます。リスト
     表示の最中は、駅名をタップするだけで確定することができます。

     TRAINを終了するには、{ALT}xと入力して下さい。

     なお、TRAINを終了させるとその時のオプション内容や中間ファイル名な
     どがレジストリに記録されます。レジストリキーは、

          \\HKEY_CURRENT_USER\Software\Gawaro\TRAIN

     です。この中身は直接操作しないで下さい。

４．より快適に使う為に

     TRAINには様々な機能があります。以下、主な物を「要求」→「方法」の
     形で説明していきます。

基本編

     (A-1)　途中停車駅を知りたい
          探索が終わると経路が表示されているでしょう。このとき各路線の
          乗車駅・下車駅しか表示されていないかもしれません。途中停車駅
          などを知りたい場合は、画面上部のツールバーに「虫眼鏡の絵」が
          書かれたボタンがありますので、これをタップして下さい。すると
          詳細な途中停車駅が表示されます。もう一度タップすると簡易表示
          に戻ります。
     (A-2)　初回乗車時の待ち合わせをしたくない
          既に列車に乗ってしまった場合や出発時刻がわかっている場合など
          、列車の待ち合わせが不要なことがあります。そのような時には、
          画面上部のツールバーにある「ホームに入る電車の絵」が書かれた
          ボタンをタップして下さい。再度探索を行うと初回の待ち合わせを
          しない経路が表示されます。もう一度タップすると初回待ち合わせ
          を行う探索となります。
     (A-3)　出発駅／到着駅で利用する路線を決めたい
          (A-2)　の様に既に列車に乗ってしまっている場合や、デフォルト
          での探索結果が気にいらない場合、出発駅／到着駅での利用路線を
          決めることができます。出発駅や到着駅の下に表示されている四角
          形の領域をタップして下さい。ダイアログがあらわれ、その駅で利
          用できる路線の一覧が表示されます。目的の路線をスタイラスで選
          んでください。一度決定した路線を取り消す場合は、同じダイアロ
          グを出した後、何も選択せずに {X}ボタンを押すか、 ESCキーを押
          してください。
     (A-4)　駅名を路線名からリスト選択で指定したい
          駅名を何も入力しない状態で{Enter}キーを押すか，駅の入力フィ
          ールドでカーソルが点滅している状態で，「新幹線の絵」のボタン
          を押してください。３つの部分にわかれたダイアログ画面が現れ左
          側には「ＪＲ」や「京王」など営業会社のリストが表示されていま
          す。ここで営業会社をタップすると、今度は中央にその営業会社の
          路線がリスト表示されます。路線をタップすると右側にその路線内
          の停車駅がリスト表示されます。入力したい駅をタップすれば、選
          択した駅が出発駅／到着駅に挿入されます。
     (A-5)　特定の路線を使用不可にしたい
          ストや事故、災害などで特定の路線が使用できなかったり、探索結
          果が気にいらなくて別の路線を利用したい場合などには、(A-5)と
          同じダイアログを出して下さい。利用したくない路線の営業会社を
          タップすると、 (A-5)と同じく路線の一覧が現れます。利用したく
          ない路線をクリックし、画面下中央の「On/Off」とかかれたボタン
          を押すと、その路線名の先頭に「x」マークが付きます。こうする
          と、探索の時にその路線を使わない経路を求める事ができます。再
          度「On/Off」ボタンを押せば、「x」マークを消す事ができます。
     (A-6)　いつ着くか知りたい
          探索が終わり結果が表示されると、TRAINを起動した時刻を出発時
          刻として、到着時刻が計算されます。任意の時刻を出発時刻にした
          い場合は、画面上中央の腕時計のボタンを押して下さい。出発時刻
          と到着時刻の２つのフィールドがあらわれます。どちらかのフィー
          ルドの時刻を変更すればもう一方のフィールドの値が自動的に計算
          されます。フィールド横の「Now」ボタンを押すと現在時刻が入力
          されます。
     (A-7)　到着時刻ではなく，経過時間を知りたい
          普通経路が表示されるときは，途中駅を通過する予想時刻が表示さ
          れますが，出発駅からの相対時間を知りたい場合があるかもしれま
          せん。その場合には，画面上部のツールバーにある「時刻表の絵」
          が書かれたボタンを押して(凹ませて)探索させてください。すると
          ，出発駅を00:00として途中駅までの所要時間が表示されます。
     (A-8)　もっと別の経路を知りたい
          TRAINは高速化のために、探索できる経路を１通りに制限していま
          す。でも、別の経路を知りたい場合がよくあるでしょう。 (A-2)
          〜(A-5)の方法を用いれば別の経路を求めることができます。それ
          以外に、別の経路を求める方法があります。画面左下に、「特急」
          「新幹線」「その他」と書かれた四角形の領域があります。これら
          は、それぞれに分類された路線の利用有無を決めるものです。×印
          が表示されている状態ならば，それらの路線を利用しません。利用
          有無を切り替えるには、これらの領域をタップして下さい。

          また、画面中央下には、「足跡」「タバコ」「人の足」の絵の横に
          入力フィールドがあります。これらはそれぞれ、「徒歩時間」「待
          ち時間」「乗換回数」の最大値を表しています。このフィールドに
          数値を入力すれば、探索の時に最大値を越えるような経路をカット
          します。

          これらを組み合わせる事でいろんな経路を求められる場合がありま
          す。

     (A-9)　別の区域のデータを利用したい
          現在、TRAINデータとして東京近郊、大阪近郊、名古屋近郊、広島
          近郊、四国全線、ソウル地下鉄などのデータが公開されています。
          これらのデータを利用するには、TRAINのデータを格納するフォル
          ダに中間ファイルを解凍しなければなりません。 TRAINを起動した
          後で、メニューから「Open」を選んだり、画面上部のファイルオー
          プンボタンを押せば、これらのデータを選択することができます。
     (A-10)　作者と連絡をとりたい
          TRAINを使っていて気に入った／入らない点をお知らせ下さると作
          者にとって励みになります。フリーソフトの原動力は主に利用者か
          らのレスポンスです。こうして欲しい、ここが間違っているという
          ご指摘も全てに対応できるとは限りませんが大歓迎いたします。
          また、携帯情報端末への移植も承ります。ただし、フリーソフトと
          して扱って頂くことが条件です。特に対価は要求しませんが開発環
          境その他をご提供頂けると移植もスムーズにいくと思います。ご自
          身で移植を希望される方には最新のソースを提供いたします。もち
          ろん公開して頂き元作者の著作権も明示することが条件です。
          （なお開発中の携帯情報端末などの秘密は厳守いたします）
          連絡先は、

          　サポート場所：NIFTY-Serve FWINCEU 7番会議室
          　メール宛て先：GHC02331@niftyserve.or.jp

          です。なお、フォーラム改編等で名称が異なっているかもしれませんからご注意を。

中級編

     初期化ファイルの変更や、TRAINの周辺パッケージが必要な技について説
     明します。

     (B-1)　起動時間を短くしたい
     (B-2)　路線利用の有無を起動時のデフォルトにしたい
          　両者は同じ解決法をとります。画面上部にある、フロッピーディ
          スクの絵のボタンを押すと、「Save Image File?」という確認ダイ
          アログが現れます。ここで「Yes」を選ぶと、中間ファイルと同じ
          フォルダに、「.TRI」という拡張子のファイルができます(イメー
          ジファイルと呼びます)。このファイルは中間ファイルを高速に読
          み込めるようにしたデータファイルです。このファイルを残してお
          くと、次回からの起動が早くなります。また、利用路線有無の状況
          もこのファイルに格納されます。

          イメージファイルがあれば、中間ファイルを削除してしまっても構
          いません。ただし、TRAINのバージョンが上がると利用できなくな
          りますから、バージョンアップ時には中間ファイルを戻しておいて
          下さい。

上級編

     ここでは別のアプリが必要な場合など、ちょっと難易度の高い使いこな
     し術について述べます。

     (C-1)　観光地などのランドマーク情報を追加したい
          普通路線データには駅の情報しか記録されていません。自宅や会社
          、遊園地などを路線データに追加する場合は、TRAIN本体以外にラ
          ンドマーク追加のパッケージを入手する必要があります。このパッ
          ケージには、SKAZU(SGL02154)さん作の東京近郊ランドマークデー
          タも含まれていますので参考にして下さい。詳しくはランドマーク
          追加パッケージのドキュメントを参照して下さい。

          入手先は、FHPPC LIB7または LIB8です。「SEA TT:ADDLM」で検索
          すれば容易に見つかるでしょう。

     (C-2)　新しい路線データを追加したり、既存のものを修正したい
          TRAINを使っていて、「どうやらこの情報は間違っているようだ」
          とか「新しい路線ができたけど誰も入力してくれない」「うち方面
          のデータを誰も作ってくれない」と思った場合、あなたはご自身で
          データを修正／作成することができます。ただ条件として作成した
          データはできるだけ公開するようにして下さい。現在利用可能なデ
          ータは全て個人が空き時間を利用してせっせと作ったものです。個
          人で楽しむ以外に他の人にもその楽しみを分かちあって下さいね。
          さて具体的なデータ作成方法ですが、データ作成用パッケージのド
          キュメントを参照して下さい(^^;)。基本的には、テキストファイ
          ルに、「路線名」「駅名」「基点駅からの所要時間」「駅名」...
          と記述していき、別のテキストファイルに既存の駅との接続情報を
          記述します。そして、makedat.exeという変換プログラムで中間フ
          ァイルを作成するというプロセスとなります。少ないデータならば
          大した作業にはなりません。

５．困った時には

     ここでは、TRAINがうまく動作しない場合などへの対処方法を説明します
     。

     (Q-1)　TRAINが起動できない
          まだどういった状況があるかわかりません。とりあえず考えられる
          のは、
             o KCTRL.DLLがコピーされていないか、/Windowsフォルダなどに
               コピーしていない。
             o コピー作業自体が失敗している。
             o メモリが足りない

          です。どうやっても解決できないようでしたらご連絡下さい。

     (Q-2)　探索しない
          「利用できる経路はありません」といったメッセージが頻繁に出る
          場合は、徒歩時間・待ち時間・乗換回数などの上限値が少なすぎな
          いか確認して下さい。
          また、利用路線の指定で路線を探索対象からはずしている場合にも
          、同様の事態となります。間違って利用路線を保存していないか確
          認して下さい。どの路線を「利用しない」に設定したか思い出せな
          い場合は、利用路線選択のダイアログを出した後、画面左下の
          「Reset」というボタンを押せば全ての路線を「利用する」ように
          します。ここで、メニューから「Save Image」を選べば初期状態の
          イメージファイルを作成できます。
     (Q-3)　変な探索を行ってしまう
          これは、TRAINの能力によるものかもしれません。ただ、利用路線
          を絞って探索した場合には、苦し紛れの探索をする場合もあります
          。(Q-2)の時と同様の確認を行って下さい。
          また、徒歩で始まったり終わったりする経路の場合に、正しく徒歩
          時間や待ち時間などが表示されない場合もあります。
          どうしても変な探索をする場合は、あなたもデータ作成ＨＰに参加
          して解決策を探しましょう。
     (Q-4)　詳細表示がおかしい
          ユーカリが丘線などＰ型のループになっている路線では、詳細表示
          にバグがあり正しく表示されない場合があります。ただ、あまり一
          般的ではなく、また致命的でないのでまだ対処してません。
     (Q-5)　なんだかおかしい
          他にもおかしい点がある場合、作者の方へご連絡頂ければ出来るだ
          け対応いたします。遠慮なくどうぞ。

（インストールマニュアル終わり）
